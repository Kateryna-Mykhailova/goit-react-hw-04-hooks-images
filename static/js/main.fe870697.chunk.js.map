{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","services/api.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchName","setSearchName","resetForm","className","styles","e","preventDefault","trim","toast","warn","SearchForm","type","SearchForm_button","SearchFormButton_label","SearchForm_input","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","toLowerCase","api","fetchImage","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","id","src","largeImg","onClick","onImgClick","ImageGalleryItem_image","alt","ImageGallery","images","ImageGallery_container","map","image","webformatURL","largeImageURL","Button","Component","App","searchInfo","setSearchInfo","error","setError","status","setStatus","searchPage","setSearchPage","useEffect","searchApi","data","prevState","hits","scrollFunction","console","log","catch","message","window","scrollTo","top","document","documentElement","scrollHeight","behavior","loadMoreFunction","position","autoClose","color","height","width","timeout","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fe870697.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2BYys\",\"ImageGallery_container\":\"ImageGallery_ImageGallery_container__1HcxK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem___yqG4\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__1ONgd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1LuRk\",\"Modal\":\"Modal_Modal__31Pib\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2mVST\"};","import { useState } from 'react';\nimport { AiOutlineSearch } from 'react-icons/ai';\nimport { toast } from 'react-toastify';\nimport styles from '../Searchbar/Searchbar.module.css';\n\nexport default function Searchbar({ onSubmit }) {\n  const [searchName, setSearchName] = useState('');\n\n  const handleChange = e => {\n    setSearchName(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (searchName.trim() === '') {\n      //   alert('Enter a search name')\n      toast.warn('Enter a search name');\n      return;\n    }\n    onSubmit(searchName);\n    resetForm();\n  };\n\n  const resetForm = () => {\n    setSearchName('');\n  };\n\n  return (\n    <header className={styles.Searchbar}>\n      <form onSubmit={handleSubmit} className={styles.SearchForm}>\n        <button type=\"submit\" className={styles.SearchForm_button}>\n          <AiOutlineSearch />\n          <span className={styles.SearchFormButton_label}>Search</span>\n        </button>\n\n        <input\n          className={styles.SearchForm_input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={searchName}\n          onChange={handleChange}\n        />\n      </form>\n    </header>\n  );\n}\n\n// export default class Searchbar extends Component {\n//   state = {\n//     searchName: '',\n//   };\n\n//   handleChange = e => {\n//     this.setState({\n//       searchName: e.currentTarget.value.toLowerCase(),\n//     });\n//   };\n\n//   handleSubmit = e => {\n//     e.preventDefault();\n\n//     if (this.state.searchName.trim() === '') {\n//       //   alert('Enter a search name')\n//       toast.warn('Enter a search name');\n//       return;\n//     }\n//     this.props.onSubmit(this.state.searchName);\n//     this.resetForm();\n//   };\n\n//   resetForm = () => {\n//     this.setState({ searchName: '' });\n//   };\n\n//   render() {\n//     return (\n//       <header className={styles.Searchbar}>\n//         <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\n//           <button type=\"submit\" className={styles.SearchForm_button}>\n//             <AiOutlineSearch />\n//             <span className={styles.SearchFormButton_label}>Search</span>\n//           </button>\n\n//           <input\n//             className={styles.SearchForm_input}\n//             type=\"text\"\n//             autoComplete=\"off\"\n//             autoFocus\n//             placeholder=\"Search images and photos\"\n//             value={this.state.searchName}\n//             onChange={this.handleChange}\n//           />\n//         </form>\n//       </header>\n//     );\n//   }\n// }\n","function fetchImage(searchName, page) {\n  // console.log(page);\n  return fetch(\n    `https://pixabay.com/api/?q=${searchName}&page=${page}&key=23204413-d213403835507960634485f04&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`There is no information for this query ${searchName}`),\n    );\n  });\n}\n\nconst api = {\n  fetchImage,\n};\n\nexport default api;\n","import React from 'react';\nimport styles from '../ImageGalleryItem/ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ id, src, largeImg, onClick, onImgClick }) => {\n  return (\n    <li className={styles.ImageGalleryItem} key={id} onClick={onClick}>\n      <img\n        onClick={onImgClick}\n        className={styles.ImageGalleryItem_image}\n        src={src}\n        alt=\"\"\n        data-url={largeImg}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport styles from '../ImageGallery/ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\n\nconst ImageGallery = ({ images, onClick, onImgClick }) => {\n  return (\n    <div className={styles.ImageGallery_container}>\n      <ul className={styles.ImageGallery}>\n        {/* <li>jhgf</li> */}\n        {images.map(image => {\n          return (\n            // <div><p>{image.id} </p>\n            <ImageGalleryItem\n              onClick={onClick}\n              onImgClick={onImgClick}\n              key={image.id}\n              src={image.webformatURL}\n              largeImg={image.largeImageURL}\n            />\n            //   </div>\n          );\n        })}\n      </ul>\n      {/* <button type=\"button\" onClick={onClick}>Load more</button> */}\n    </div>\n  );\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport styles from '../Button/Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <>\n      <button type=\"button\" onClick={onClick} className={styles.Button}>\n        Load more\n      </button>\n    </>\n  );\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from '../Modal/Modal.module.css';\n\nexport class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleEscape);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleEscape);\n  }\n\n  handleEscape = e => {\n    let condition = e.code === 'Escape';\n    if (condition) {\n      this.props.onCloseModal();\n    }\n    console.log(e.code === 'Escape');\n  };\n\n  handleClose = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onCloseModal();\n    }\n  };\n  render() {\n    const { children } = this.props;\n    return createPortal(\n      <div className={styles.Overlay} onClick={this.handleClose}>\n        <div className={styles.Modal}>\n          {children}\n\n          {/* <img src=\"\" alt=\"\" /> */}\n        </div>\n      </div>,\n      document.getElementById('modalRoot'),\n    );\n  }\n}\n","import './App.css';\nimport styles from './App.css';\n\nimport { useState, useEffect } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Searchbar from './components/Searchbar/Searchbar';\nimport Loader from 'react-loader-spinner';\nimport searchApi from './services/api';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button/Button';\nimport { Modal } from './components/Modal/Modal';\n\nexport default function App() {\n  const [searchName, setSearchName] = useState('');\n  const [searchInfo, setSearchInfo] = useState([]);\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState('idle');\n  const [searchPage, setSearchPage] = useState(1);\n  const [showModal, setShowModal] = useState(false);\n  const [largeImgUrl, setLargeImgUrl] = useState('');\n\n  useEffect(() => {\n    if (searchName === '') {\n      return;\n    }\n\n    setStatus('pending');\n    searchApi\n      .fetchImage(searchName, searchPage)\n\n      .then(data => {\n        setSearchInfo(prevState => [...prevState, ...data.hits]);\n        setStatus('resolved');\n        scrollFunction();\n        console.log(searchPage);\n      })\n      .catch(error => setError(error.message));\n    return;\n\n    // return () => {setSearchPage(1)}\n  }, [searchName, searchPage]);\n\n  const handleFormSubmit = searchName => {\n    setSearchName(searchName);\n    setSearchPage(1);\n    setSearchInfo([]);\n  };\n\n  const scrollFunction = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  const handleClick = () => {\n    loadMoreFunction();\n  };\n\n  const loadMoreFunction = () => {\n    setSearchPage(prevState => prevState + 1);\n\n    // setStatus('pending');\n    //   searchApi\n    //     .fetchImage(searchName, searchPage)\n    //     .then(data => {\n    //       setSearchInfo(prevState => [...prevState, data.hits]);\n    //       console.log(searchInfo);\n    //       setStatus('resolved');\n\n    //        setSearchPage(prevState=>prevState + 1)\n    //       console.log(searchPage);\n    //       console.log('лм фетч');\n    //     })\n    //     .catch(error => console.log(error))\n  };\n\n  return (\n    <div className={styles.App}>\n      <Searchbar onSubmit={handleFormSubmit} />\n      {/* {showModal && (\n          <Modal onCloseModal={this.onCloseModal}>\n            <img src={largeImgUrl} alt=\"\" />\n          </Modal>\n        )} */}\n      <ToastContainer position=\"top-center\" autoClose={2000} />\n      {status === 'idle' && <div>Enter something</div>}\n      {status === 'pending' && (\n        <Loader\n          type=\"BallTriangle\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      )}\n      {/* {status === 'rejected' && <h1>{error.message}</h1>} */}\n      {status === 'rejected' && <h1>{error}</h1>}\n      {status === 'resolved' && searchInfo.length > 0 && (\n        <>\n          <ImageGallery\n            images={searchInfo}\n            // onClick={this.onOpenModal}\n            // onImgClick={this.onImgClick}\n          />\n          <Button onClick={handleClick} />\n        </>\n      )}\n    </div>\n  );\n}\n\n// const fetchFunction = () => {\n//  console.log('fetch');\n//  return searchApi\n//    .fetchImage(searchName, searchPage)\n//    .then(searchInfo => {\n//      setSearchInfo([...searchInfo, ...searchInfo.hits]);\n//      setStatus('resolved');\n//      setSearchPage(prevState => prevState + 1)\n//    })\n//    .catch(error =>\n//      setError(error),\n//      setStatus('rejected')\n//     );\n//       // return()=>{console.log('stop')\n// };\n\n//  .then(searchInfo => {\n//    setSearchInfo([...searchInfo, ...searchInfo.hits]);\n//    setStatus('resolved');\n//    setSearchPage(prevState => prevState + 1)\n//  })\n// .catch(error => {\n//   console.log(error);\n//  setError(error),\n//  setStatus('rejected')});\n\n// return()=>{console.log('stop');}\n// }\n// },\n//     [searchName, searchPage]))\n// useEffect(() => {\n//   if (searchName === '') {\n//     return\n\n//   setSearchPage(1);\n//   setStatus('pending');\n//   setSearchInfo([]);\n//   fetchFunction(searchName, searchPage);\n\n//   // return()=>{console.log('stop');}\n//    },\n//     [searchName, searchPage])\n\n// class App extends React.Component {\n//   state = {\n//     searchName: '',\n//     searchInfo: [],\n//     error: null,\n//     status: 'idle',\n//     searchPage: 1,\n//     showModal: false,\n//     largeImgUrl: '',\n//   };\n\n//   componentDidUpdate(prevProps, prevState) {\n//     if (this.state.searchInfo.length > 12) {\n//       window.scrollTo({\n//         top: document.documentElement.scrollHeight,\n//         behavior: 'smooth',\n//       });\n//     }\n\n//     if (prevState.searchName !== this.state.searchName) {\n//       this.setState({ searchPage: 1 });\n//       this.setState({ status: 'pending' });\n//       this.setState({ searchInfo: [] });\n//       this.fetchFunction();\n//     }\n//     return;\n//   }\n\n//   handleFormSubmit = searchName => {\n//     this.setState({ searchName });\n//   };\n\n//   handleClick = () => {\n//     this.fetchFunction();\n//     // console.log(this.state.searchInfo.length);\n//   };\n\n//   fetchFunction = () => {\n//     return searchApi\n//       .fetchImage(this.state.searchName, this.state.searchPage)\n//       .then(searchInfo => {\n//         this.setState({\n//           searchInfo: [...this.state.searchInfo, ...searchInfo.hits],\n//           status: 'resolved',\n//         });\n//         this.setState(prevState => ({ searchPage: prevState.searchPage + 1 }));\n//       })\n//       .catch(error => this.setState({ error, status: 'rejected' }));\n//   };\n\n//   onCloseModal = () => {\n//     this.setState({ showModal: false });\n//   };\n\n//   onOpenModal = () => {\n//     this.setState({ showModal: true });\n//   };\n\n//   onImgClick = e => {\n//     console.log(e.target.dataset);\n//     if (e.target.nodeName !== 'IMG') {\n//       return;\n//     }\n//     this.setState({ largeImgUrl: e.target.dataset.url });\n//   };\n\n//   render() {\n//     const { searchInfo, error, status, showModal, largeImgUrl } = this.state;\n\n//     return (\n//       <div className={styles.App}>\n//         <Searchbar onSubmit={this.handleFormSubmit} />\n//         {showModal && (\n//           <Modal onCloseModal={this.onCloseModal}>\n//             <img src={largeImgUrl} alt=\"\" />\n//           </Modal>\n//         )}\n//         <ToastContainer position=\"top-center\" autoClose={2000} />\n//         {status === 'idle' && <div>Enter something</div>}\n//         {status === 'pending' && (\n//           <Loader\n//             type=\"BallTriangle\"\n//             color=\"#00BFFF\"\n//             height={100}\n//             width={100}\n//             timeout={3000}\n//           />\n//         )}\n//         {status === 'rejected' && <h1>{error.message}</h1>}\n//         {status === 'resolved' && searchInfo.length > 0 && (\n//           <>\n//             <ImageGallery\n//               images={searchInfo}\n//               onClick={this.onOpenModal}\n//               onImgClick={this.onImgClick}\n//             />\n//             <Button onClick={this.handleClick} />\n//           </>\n//         )}\n//       </div>\n//     );\n//   }\n// }\n\n// export default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3kkOy\",\"SearchForm\":\"Searchbar_SearchForm__3AZhF\",\"SearchForm_button\":\"Searchbar_SearchForm_button__28WrT\",\"SearchFormButton_label\":\"Searchbar_SearchFormButton_label__1ekL7\",\"SearchForm_input\":\"Searchbar_SearchForm_input__1ifGI\"};"],"sourceRoot":""}